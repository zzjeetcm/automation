import{r as i,j as r,R as Oe}from"./react-C1R9VIsi.js";import{c as Re}from"./react-dom-oUAr-6g_.js";import{u as q,a as P,P as Me}from"./react-redux-DEe1ooAp.js";import{N as k,c as We,R as qe}from"./react-router-dom-4BK_GWK6.js";import{t as I,p as S,a as ze,f as $,s as Be}from"./@redux-saga-C8lK6FlE.js";import{c as Z,a as Ve}from"./@reduxjs-DVdFRU_h.js";import{a as F}from"./axios-Bo0ATomq.js";import{e as Je,c as ve,O as $e,f as Ge,g as Ye}from"./react-router-qlYjPv88.js";import{_ as Ze,N as Ke}from"./react-push-notification-BD2RqL_W.js";import{T as Qe}from"./react-icons-LnaneJoC.js";import{c as K}from"./tailwind-variants-R0iBJBUm.js";import{a as He}from"./@remix-run-ETicesdp.js";import{H as Xe}from"./html5-qrcode-baPCzd1o.js";import{u as es}from"./react-dropzone-aqg0vtuh.js";import{v as ss}from"./uuid-D8aEg3BZ.js";import"./attr-accept-CaXXqTot.js";import"./scheduler-CzFDRTuY.js";import"./use-sync-external-store-DrOwrFnf.js";import"./@babel-B-8tVzRs.js";import"./redux-DITMfSWq.js";import"./immer-BWU1mfoO.js";import"./reselect-BeKUwQU7.js";import"./redux-thunk-ClJT1hhx.js";import"./tailwind-merge-BOThOImB.js";import"./prop-types-BihR8TvY.js";import"./file-selector-DMfHbpIn.js";import"./tslib-BUXlnTRQ.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function t(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=t(n);fetch(n.href,o)}})();const se="users",rs=`${se}/getUserAction`,ts=`${se}/getUserCommonAction`,as={user:{data:null,isLoading:!1,isSuccess:!1,errors:""},common:{data:null,isLoading:!1,isSuccess:!1,errors:""}},Ae=Z({name:se,initialState:as,reducers:{getUserAction:(e,{})=>{e.user.isLoading=!0,e.user.isSuccess=!1,e.user.errors=""},getUserSuccessAction:(e,{payload:s})=>{e.user.isLoading=!1,e.user.isSuccess=!0,e.user.data=s},getUserErrorAction:(e,{payload:s})=>{e.user.isLoading=!1,e.user.isSuccess=!1,e.user.errors=s},getUserCommonAction:e=>{e.common.isLoading=!0,e.common.isSuccess=!1,e.common.errors=""},getUserCommonSuccessAction:(e,{payload:s})=>{e.common.isLoading=!1,e.common.isSuccess=!0,e.common.data=s},getUserCommonErrorAction:(e,{payload:s})=>{e.common.isLoading=!1,e.common.isSuccess=!1,e.common.errors=s}}}),{getUserAction:st,getUserSuccessAction:is,getUserErrorAction:ns,getUserCommonAction:rt,getUserCommonSuccessAction:os,getUserCommonErrorAction:cs}=Ae.actions,ls=Ae.reducer,be="auths",ds=`${be}/getUserAccessTokenAction`,us={userAccessToken:{data:null,isLoading:!1,isSuccess:!1,errors:""}},je=Z({name:be,initialState:us,reducers:{getUserAccessTokenAction:(e,{})=>{e.userAccessToken.isLoading=!0,e.userAccessToken.isSuccess=!1,e.userAccessToken.errors=""},getUserAccessTokenClearAction:e=>{e.userAccessToken.data=null,e.userAccessToken.isLoading=!1,e.userAccessToken.isSuccess=!1,e.userAccessToken.errors=""},getUserAccessTokenSuccessAction:(e,{payload:s})=>{e.userAccessToken.isLoading=!1,e.userAccessToken.isSuccess=!0,e.userAccessToken.data=s},getUserAccessTokenErrorAction:(e,{payload:s})=>{e.userAccessToken.isLoading=!1,e.userAccessToken.isSuccess=!1,e.userAccessToken.errors=s}}}),{getUserAccessTokenAction:ps,getUserAccessTokenSuccessAction:ms,getUserAccessTokenErrorAction:fs,getUserAccessTokenClearAction:pe}=je.actions,hs=je.reducer,z="dispensarys",ys=`${z}/getDispensarySearchAction`,gs=`${z}/putDispensaryWIPStatusAction`,Ss=`${z}/postSubmitDispensaryAction`,xs=`${z}/putDispensaryCheckerAction`,_s=`${z}/putDispensaryUploadFileAction`,vs={dispensarySearch:{data:null,isLoading:!1,isSuccess:!1,errors:""},putDispensaryWIPStatus:{data:null,isLoading:!1,isSuccess:!1,errors:""},postSubmitDispensary:{data:null,isLoading:!1,isSuccess:!1,errors:""},putDispensaryChecker:{data:null,isLoading:!1,isSuccess:!1,errors:""},putDispensaryUploadFile:{data:null,isLoading:!1,isSuccess:!1,errors:""}},De=Z({name:z,initialState:vs,reducers:{getDispensarySearchAction:(e,{})=>{e.dispensarySearch.isLoading=!0,e.dispensarySearch.isSuccess=!1,e.dispensarySearch.errors=""},getDispensarySearchClearAction:e=>{e.dispensarySearch.isLoading=!1,e.dispensarySearch.isSuccess=!1,e.dispensarySearch.errors=""},getDispensarySearchSuccessAction:(e,{payload:s})=>{e.dispensarySearch.isLoading=!1,e.dispensarySearch.isSuccess=!0,e.dispensarySearch.data=s},getDispensarySearchErrorAction:(e,{payload:s})=>{e.dispensarySearch.isLoading=!1,e.dispensarySearch.isSuccess=!1,e.dispensarySearch.errors=s},putDispensaryWIPStatusAction:(e,{})=>{e.putDispensaryWIPStatus.isLoading=!0,e.putDispensaryWIPStatus.isSuccess=!1,e.putDispensaryWIPStatus.errors=""},putDispensaryWIPStatusClearAction:e=>{e.putDispensaryWIPStatus.isLoading=!1,e.putDispensaryWIPStatus.isSuccess=!1,e.putDispensaryWIPStatus.errors=""},putDispensaryWIPStatusSuccessAction:(e,{payload:s})=>{e.putDispensaryWIPStatus.isLoading=!1,e.putDispensaryWIPStatus.isSuccess=!0,e.putDispensaryWIPStatus.data=s},putDispensaryWIPStatusErrorAction:(e,{payload:s})=>{e.putDispensaryWIPStatus.isLoading=!1,e.putDispensaryWIPStatus.isSuccess=!1,e.putDispensaryWIPStatus.errors=s},postSubmitDispensaryAction:(e,{})=>{e.postSubmitDispensary.isLoading=!0,e.postSubmitDispensary.isSuccess=!1,e.postSubmitDispensary.errors=""},postSubmitDispensaryClearAction:e=>{e.postSubmitDispensary.isLoading=!1,e.postSubmitDispensary.isSuccess=!1,e.postSubmitDispensary.errors=""},postSubmitDispensarySuccessAction:(e,{payload:s})=>{e.postSubmitDispensary.isLoading=!1,e.postSubmitDispensary.isSuccess=!0,e.postSubmitDispensary.data=s},postSubmitDispensaryErrorAction:(e,{payload:s})=>{e.postSubmitDispensary.isLoading=!1,e.postSubmitDispensary.isSuccess=!1,e.postSubmitDispensary.errors=s},putDispensaryCheckerAction:(e,{})=>{e.putDispensaryChecker.isLoading=!0,e.putDispensaryChecker.isSuccess=!1,e.putDispensaryChecker.errors=""},putDispensaryCheckerClearAction:e=>{e.putDispensaryChecker.isLoading=!1,e.putDispensaryChecker.isSuccess=!1,e.putDispensaryChecker.errors=""},putDispensaryCheckerSuccessAction:(e,{payload:s})=>{e.putDispensaryChecker.isLoading=!1,e.putDispensaryChecker.isSuccess=!0,e.putDispensaryChecker.data=s},putDispensaryCheckerErrorAction:(e,{payload:s})=>{e.putDispensaryChecker.isLoading=!1,e.putDispensaryChecker.isSuccess=!1,e.putDispensaryChecker.errors=s},putDispensaryUploadFileAction:(e,{})=>{e.putDispensaryUploadFile.isLoading=!0,e.putDispensaryUploadFile.isSuccess=!1,e.putDispensaryUploadFile.errors=""},putDispensaryUploadFileClearAction:e=>{e.putDispensaryUploadFile.isLoading=!1,e.putDispensaryUploadFile.isSuccess=!1,e.putDispensaryUploadFile.errors=""},putDispensaryUploadFileSuccessAction:(e,{payload:s})=>{e.putDispensaryUploadFile.isLoading=!1,e.putDispensaryUploadFile.isSuccess=!0,e.putDispensaryUploadFile.data=s},putDispensaryUploadFileErrorAction:(e,{payload:s})=>{e.putDispensaryUploadFile.isLoading=!1,e.putDispensaryUploadFile.isSuccess=!1,e.putDispensaryUploadFile.errors=s}}}),{getDispensarySearchAction:Q,getDispensarySearchClearAction:T,getDispensarySearchSuccessAction:As,getDispensarySearchErrorAction:bs,putDispensaryWIPStatusAction:we,putDispensaryWIPStatusClearAction:me,putDispensaryWIPStatusSuccessAction:js,putDispensaryWIPStatusErrorAction:Ds,postSubmitDispensaryAction:ws,postSubmitDispensaryClearAction:fe,postSubmitDispensarySuccessAction:Ns,postSubmitDispensaryErrorAction:Cs,putDispensaryCheckerAction:Es,putDispensaryCheckerClearAction:he,putDispensaryCheckerSuccessAction:ks,putDispensaryCheckerErrorAction:Ls,putDispensaryUploadFileAction:Fs,putDispensaryUploadFileClearAction:ye,putDispensaryUploadFileSuccessAction:Us,putDispensaryUploadFileErrorAction:Is}=De.actions,Ps=De.reducer,re="cloudStorage",Ts=`${re}/postS3FileAction`,Os=`${re}/postDispensaryCreatePresignedAction`,Rs={postS3File:{data:null,isLoading:!1,isSuccess:!1,errors:""},postDispensaryCreatePresigned:{data:null,isLoading:!1,isSuccess:!1,errors:""}},Ne=Z({name:re,initialState:Rs,reducers:{postS3FileAction:(e,{})=>{e.postS3File.isLoading=!0,e.postS3File.isSuccess=!1,e.postS3File.errors=""},postS3FileClearAction:e=>{e.postS3File.data=null,e.postS3File.isLoading=!1,e.postS3File.isSuccess=!1,e.postS3File.errors=""},postS3FileSuccessAction:e=>{e.postS3File.isLoading=!1,e.postS3File.isSuccess=!0,e.postS3File.data=null},postS3FileErrorAction:(e,{payload:s})=>{e.postS3File.isLoading=!1,e.postS3File.isSuccess=!1,e.postS3File.errors=s},postDispensaryCreatePresignedAction:(e,{})=>{e.postDispensaryCreatePresigned.isLoading=!0,e.postDispensaryCreatePresigned.isSuccess=!1,e.postDispensaryCreatePresigned.errors=""},postDispensaryCreatePresignedClearAction:e=>{e.postDispensaryCreatePresigned.isLoading=!1,e.postDispensaryCreatePresigned.isSuccess=!1,e.postDispensaryCreatePresigned.errors=""},postDispensaryCreatePresignedSuccessAction:(e,{payload:s})=>{e.postDispensaryCreatePresigned.isLoading=!1,e.postDispensaryCreatePresigned.isSuccess=!0,e.postDispensaryCreatePresigned.data=s},postDispensaryCreatePresignedErrorAction:(e,{payload:s})=>{e.postDispensaryCreatePresigned.isLoading=!1,e.postDispensaryCreatePresigned.isSuccess=!1,e.postDispensaryCreatePresigned.errors=s}}}),{postS3FileAction:Ms,postS3FileSuccessAction:Ws,postS3FileErrorAction:qs,postS3FileClearAction:ge,postDispensaryCreatePresignedAction:zs,postDispensaryCreatePresignedClearAction:Se,postDispensaryCreatePresignedSuccessAction:Bs,postDispensaryCreatePresignedErrorAction:Vs}=Ne.actions,Js=Ne.reducer,$s={users:ls,auths:hs,dispensarys:Ps,cloudStorages:Js},b=e=>e instanceof Error?{name:e.name,message:e.message}:{name:"Error",message:(e==null?void 0:e.toString())||"An unknown error occurred"};function*Gs({payload:e}){try{const s=yield F.get(`/api/users/${e}`);yield S(is(s.data))}catch(s){yield S(ns(b(s).message))}}function*Ys(){try{const e=yield F.get("/api/v1/common/user/race_select_field");yield S(os(e.data))}catch(e){yield S(cs(b(e).message))}}function*Zs(){yield I(rs,Gs),yield I(ts,Ys)}const R={headers:{"Content-Type":"application/json",withCredentials:!0}},Ks={headers:{"Content-Type":"multipart/form-data",withCredentials:!0,Authorization:""}};function*Qs({payload:e}){try{const s=yield F.post("/token/v1/auth/get_access_token_by_api_key",e,R);yield S(ms(s.data))}catch(s){yield S(fs(b(s).message))}}function*Hs(){yield I(ds,Qs)}function*Xs({payload:e}){try{const s=JSON.stringify(e),t=yield F.post("/api/v1/work_order/dispensary/search_dwo",s,R);yield S(As(t.data))}catch(s){yield S(bs(b(s).message))}}function*er({payload:e}){try{const s=yield F.put("/api/v1/work_order/dispensary/set_dispensary_wip_mode/"+e.id,{},R);yield S(js(s.data))}catch(s){yield S(Ds(b(s).message))}}function*sr({payload:e}){try{const s=JSON.stringify(e),t=yield F.post("/api/v1/work_order/dispensary/submit_dispensary_header",s,R);yield S(Ns(t.data))}catch(s){yield S(Cs(b(s).message))}}function*rr({payload:e}){try{const s=JSON.stringify(e),t=yield F.put("/api/v1/work_order/dispensary/set_dispensary_checker",s,R);yield S(ks(t.data))}catch(s){yield S(Ls(b(s).message))}}function*tr({payload:e}){try{const s=JSON.stringify(e),t=yield F.put("/api/v1/work_order/dispensary/set_upload_file",s,R);yield S(Us(t.data))}catch(s){yield S(Is(b(s).message))}}function*ar(){yield I(ys,Xs),yield I(gs,er),yield I(Ss,sr),yield I(xs,rr),yield I(_s,tr)}function*ir({payload:e}){try{const s=new FormData;s.append("AWSAccessKeyId",e.AWSAccessKeyId),s.append("key",e.key),s.append("policy",e.policy),s.append("signature",e.signature),s.append("file",e.file),yield F.post(e.postUrl,s,Ks),yield S(Ws())}catch(s){yield S(qs(b(s).message))}}function*nr({payload:e}){try{const s=JSON.stringify(e),t=yield F.post("/api/v1/work_order/dispensary/create_presigned_post",s,R);yield S(Bs(t.data))}catch(s){yield S(Vs(b(s).message))}}function*or(){yield I(Ts,ir),yield I(Os,nr)}const cr=function*(){yield ze([$(Hs),$(Zs),$(ar),$(or)])},Ce=Be(),lr=Ve({reducer:$s,middleware:e=>e({serializableCheck:!1}).concat(Ce)});Ce.run(cr);const Ee=i.createContext({}),dr=({children:e})=>{const s=Je(),t=q(),a=ve(),[n,o]=i.useState(null),[u,d]=i.useState(null),[_,h]=i.useState(null),{userAccessToken:c}=P(m=>m.auths);i.useEffect(()=>{localStorage.getItem("token")&&(F.defaults.headers.common.Authorization="JWT "),localStorage.removeItem("token"),h(null)},[]),i.useEffect(()=>{var m,v,L,p;if(c.isLoading===!1&&c.isSuccess===!0&&(h(((m=c.data)==null?void 0:m.access_token)||null),localStorage.setItem("token",((v=c.data)==null?void 0:v.access_token)||""),F.defaults.headers.common.Authorization="JWT "+((L=c.data)==null?void 0:L.access_token)||"",(p=a.state)!=null&&p.from&&s(a.state.from.pathname)),c.isLoading===!1&&c.isSuccess===!1&&c.errors)throw t(pe()),new Error(c.errors)},[c,s,a,t]);const j=async(m,v)=>{d(v),o(m),t(ps({api_key:m,secret_key:v}))},y=()=>!!_,D=()=>{localStorage.removeItem("token"),h(""),t(pe())};return r.jsx(Ee.Provider,{value:{loginUser:j,api_key:n,secret_key:u,token:_,logout:D,isLoggedIn:y},children:e})},te=()=>Oe.useContext(Ee);function ur({orderNo:e,countDownInSecond:s,deleteAlert:t}){const a=i.useCallback(()=>{t(e),Ze({title:"Time Out",message:e+" is done soaking",native:!0})},[t,e]);return i.useEffect(()=>{const n=setTimeout(a,s*1e3);return()=>clearTimeout(n)},[a,s]),r.jsx(r.Fragment,{})}const ke={alertList:[],addAlert:()=>{},deleteAlert:()=>{}},pr=i.createContext(ke),mr=({children:e})=>{const[s,t]=i.useState(ke.alertList),a=o=>t([...s,{orderNo:o}]),n=i.useCallback(o=>t(u=>u.filter(d=>d.orderNo!==o)),[]);return r.jsxs(pr.Provider,{value:{alertList:s,addAlert:a,deleteAlert:n},children:[s.map(o=>r.jsx(ur,{...o,countDownInSecond:60*30,deleteAlert:n},o.orderNo)),r.jsx(Ke,{}),e]})};function fr(){return r.jsx(r.Fragment,{children:r.jsx(mr,{children:r.jsx(dr,{children:r.jsx($e,{})})})})}const ae=K({base:"text-center relative font-semibold whitespace-nowrap align-middle outline-none inline-flex items-center justify-center select-none",variants:{size:{xs:"text-xs py-1 px-2",md:"text-sm py-2 px-4",lg:"text-base py-3 px-6",xl:"text-lg py-4 px-8",xxl:"text-xl py-5 px-10",square_xs:"text-xs h-4 w-4 p-1",square_sm:"text-sm h-6 w-6 p-1",square_md:"text-base h-8 w-8 p-1",square_lg:"text-lg h-10 w-10 p-1",square_xl:"text-xl h-12 w-12 p-1"},vPadding:{xs:"py-[4px]",sm:"py-[8px]",md:"py-[12px]",lg:"py-[16px]"},vSpace:{xs:"my-1",sm:"my-2",md:"my-4",lg:"my-6"},HSpace:{xs:"mx-1",sm:"mx-2",md:"mx-4",lg:"mx-6"},align:{center:"mx-auto",right:"ml-auto",left:"mr-auto",top:"mb-auto",bottom:"mt-auto"},rounded:{none:"rounded-none",xs:"rounded-[2px]",sm:"rounded-[4px]",normal:"rounded-[8px]",lg:"rounded-[12px]",full:"rounded-full"},behavior:{block:"w-full"}}}),hr=K({extend:ae,variants:{color:{green:"bg-[#58cc02] text-gray-100 shadow active:shadow-none active:translate-y-[5px]",teal:"bg-[#0D9488] text-gray-100 shadow-teal active:shadow-none active:translate-y-[5px]",yellow:"bg-[#FFC700] text-gray-100 shadow-yellow active:shadow-none active:translate-y-[5px]",gray:"bg-[#64748B] text-gray-100 shadow-blueGray active:shadow-none active:translate-y-[5px]"}}}),yr=K({extend:ae,base:"ring-1",variants:{color:{green:"ring-[#58cc02] text-[#58cc02] shadow active:shadow-none active:translate-y-[5px]",teal:"ring-[#0D9488] text-[#0D9488] shadow-teal active:shadow-none active:translate-y-[5px]",yellow:"ring-[#FFC700] text-[#FFC700] shadow-yellow active:shadow-none active:translate-y-[5px]",gray:"ring-[#64748B] text-[#64748B] shadow-blueGray active:shadow-none active:translate-y-[5px]"}}}),gr=K({extend:ae,variants:{color:{green:"text-[#58cc02]",teal:"text-[#0D9488]",yellow:"text-[#FFC700]",gray:"text-[#64748B]"}}}),N=i.forwardRef((e,s)=>{const{type:t,children:a,buttonStyle:n,buttonVariant:o,disabled:u,isLoading:d,leftIcon:_,rightIcon:h,className:c,...j}=e,{newIcon:y,iconPlacement:D}=i.useMemo(()=>{let v=h||_;return d&&(v=r.jsx(Qe,{className:"animate-spin",size:25})),{newIcon:v,iconPlacement:h?"right":"left"}},[d,_,h]),m=()=>o==="solid"?hr({...n,className:c}):o==="outline"?yr({...n,className:c}):gr({...n,className:c});return r.jsxs("button",{className:m(),...j,type:t?"submit":"button",ref:s,disabled:u||d,children:[y&&D==="left"?r.jsx("span",{className:`inline-flex shrink-0 self-center ${a&&!d&&"mr-2"}`,children:y}):null,!d&&a,y&&D==="right"?r.jsx("span",{className:`inline-flex shrink-0 self-center  ${a&&!d&&"ml-2"}`,children:y}):null]})});N.defaultProps={buttonStyle:{},buttonVariant:"solid",isLoading:!1,disabled:!1,leftIcon:void 0,rightIcon:void 0};function xe(){var s;const e=Ge();return He(e)?(e.status===401||e.status,r.jsxs("div",{className:"md:container md:mx-auto",children:[r.jsx("div",{className:"p-6 space-x-4 flex flex-wrap",children:r.jsx(k,{to:"/",className:({isActive:t,isPending:a})=>a?"pending":t?"active":"",children:r.jsx(N,{buttonStyle:{color:"yellow",rounded:"lg",size:"md",vSpace:"md"},buttonVariant:"outline",children:"Home"})})}),r.jsxs("div",{id:"error-page",className:"flex flex-col gap-8 justify-center items-center",children:[r.jsxs("h1",{className:"font-bold",children:["Oops! ",e.status]}),r.jsx("p",{children:e.statusText}),((s=e.data)==null?void 0:s.message)&&r.jsx("p",{className:"text-slate-400",children:r.jsx("i",{children:e.data.message})})]})]})):e instanceof Error?r.jsxs("div",{className:"md:container md:mx-auto",children:[r.jsx("div",{className:"p-6 space-x-4 flex flex-wrap",children:r.jsx(k,{to:"/",className:({isActive:t,isPending:a})=>a?"pending":t?"active":"",children:r.jsx(N,{buttonStyle:{color:"yellow",rounded:"lg",size:"md",vSpace:"md"},buttonVariant:"outline",children:"Home"})})}),r.jsxs("div",{id:"error-page",className:"flex flex-col gap-8 justify-center items-center ",children:[r.jsx("h1",{className:"font-bold",children:"Oops! Unexpected Error"}),r.jsx("p",{className:"text-slate-400",children:r.jsx("i",{children:e.message})})]})]}):r.jsx(r.Fragment,{})}const _e="reader",Sr=e=>{const s={fps:0,supportedScanTypes:[],rememberLastUsedCamera:!0,disableFlip:!0};return e.fps&&(s.fps=e.fps),e.qrbox&&(s.qrbox=e.qrbox),e.aspectRatio&&(s.aspectRatio=e.aspectRatio),e.disableFlip!==void 0&&(s.disableFlip=e.disableFlip),e.rememberLastUsedCamera!==void 0&&(s.rememberLastUsedCamera=e.rememberLastUsedCamera),s},V=e=>(i.useEffect(()=>{const s=Sr(e),t=e.verbose===!0;if(!e.qrCodeSuccessCallback)throw"qrCodeSuccessCallback is required callback.";const a=new Xe(_e,s,t);return a.render(e.qrCodeSuccessCallback,e.qrCodeErrorCallback),()=>{a.clear().catch(n=>{throw"Failed to clear html5QrcodeScanner. "+n})}},[e]),r.jsx("div",{className:"w-full [&>div>img]:!inline-block",id:_e})),H=e=>(i.useEffect(()=>{const s=setTimeout(()=>{e.setAlert(!1)},3e3);return()=>clearTimeout(s)},[e]),r.jsx(r.Fragment,{children:e.alert&&r.jsx("div",{className:"fixed left-0 top-0 z-[1055] h-full w-full overflow-y-auto overflow-x-hidden outline-none backdrop-brightness-50",children:r.jsx("div",{className:"px-2 mt-16",children:r.jsxs("div",{className:"bg-green-200 px-6 py-4 mx-auto my-4 rounded-md text-lg flex items-center  max-w-lg",children:[r.jsx("svg",{viewBox:"0 0 24 24",className:"text-green-600 w-5 h-5 sm:w-5 sm:h-5 mr-3",children:r.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"})}),r.jsx("span",{className:"text-green-800",children:e.message})]})})})})),B=e=>(i.useEffect(()=>{const s=setTimeout(()=>{e.setAlert(!1)},3e3);return()=>clearTimeout(s)},[e]),r.jsx(r.Fragment,{children:e.alert&&r.jsx("div",{className:"fixed left-0 top-0 z-[1055] h-full w-full overflow-y-auto overflow-x-hidden outline-none backdrop-brightness-50",children:r.jsx("div",{className:"px-2 mt-16",children:r.jsxs("div",{className:"bg-red-200 px-6 py-4 mx-auto my-4 rounded-md text-lg flex items-center max-w-lg",children:[r.jsx("svg",{viewBox:"0 0 24 24",className:"text-red-600 w-5 h-5 sm:w-5 sm:h-5 mr-3",children:r.jsx("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})}),r.jsxs("span",{className:"text-red-800",children:[" ",e.message]})]})})})})),X=e=>(i.useEffect(()=>{const s=setTimeout(()=>{e.setAlert(!1)},3e3);return()=>clearTimeout(s)},[e]),r.jsx(r.Fragment,{children:e.alert&&r.jsx("div",{className:"fixed left-0 top-0 z-[1055] h-full w-full overflow-y-auto overflow-x-hidden outline-none backdrop-brightness-50",children:r.jsx("div",{className:"px-2 mt-16",children:r.jsxs("div",{className:"bg-blue-200 px-6 py-4 mx-auto my-4 rounded-md text-lg flex items-center max-w-lg",children:[r.jsx("svg",{viewBox:"0 0 24 24",className:"text-blue-600 w-5 h-5 sm:w-5 sm:h-5 mr-3",children:r.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"})}),r.jsxs("span",{className:"text-blue-800",children:[" ",e.message]})]})})})})),Le=2,ie=4,ne=8,xr=()=>{const e=q(),{dispensarySearch:s,putDispensaryWIPStatus:t}=P(l=>l.dispensarys),[a,n]=i.useState(!1),[o,u]=i.useState(!1),[d,_]=i.useState(""),[h,c]=i.useState(!1),[j,y]=i.useState(""),[D,m]=i.useState(!1),[v,L]=i.useState(""),[p,E]=i.useState(),A=l=>{try{const x=JSON.parse(l);e(Q({search_store_order_number_value:x.storeOrderNum,is_pagination:!1,order_by_direction:"",order_by_field:"",page_number:0,page_size:0,search_dispensary_order_id_value:"",search_dispensary_order_number_value:"",search_end_date_value:"",search_end_timestamp_value:"",search_physician_contact_number_value:"",search_physician_name_value:"",search_staff_contact_number_value:"",search_staff_name_value:"",search_start_date_value:"",search_start_timestamp_value:"",search_status_type_value:"",search_store_header_desc_value:""})),E(x),n(!0)}catch{u(!0),_("Invalid QR code."),n(!1)}};return i.useEffect(()=>{var l,x;try{if(s.isLoading===!1&&s.isSuccess===!0){const g=(x=(l=s.data)==null?void 0:l.dispensary_headers)==null?void 0:x.find(U=>U.store_medicine_header.name===(p==null?void 0:p.groupName));g?(g.id&&g.status_type===Le&&e(we({id:g==null?void 0:g.id})),g.status_type===ie&&(c(!0),y("Order has been WIP."),n(!1)),g.status_type===ne&&(c(!0),y("Order has been closed."),n(!1))):(u(!0),_("Invalid QR code."),n(!1)),e(T())}if(s.isLoading===!1&&s.isSuccess===!1&&s.errors)throw s.errors}catch(g){throw e(T()),{data:"",internal:!1,status:400,message:g}}},[e,p==null?void 0:p.groupName,s]),i.useEffect(()=>{try{if(t.isLoading===!1&&t.isSuccess===!0&&(m(!0),L("Order has been change to WIP status."),n(!0),e(me())),t.isLoading===!1&&t.isSuccess===!1&&t.errors)throw t.errors}catch(l){throw e(me()),{data:"",internal:!1,status:400,message:l}}},[e,t]),r.jsxs("div",{className:"md:container md:mx-auto",children:[r.jsx("div",{className:"p-6 space-x-4 flex flex-wrap",children:r.jsx(k,{to:"/",className:({isActive:l,isPending:x})=>x?"pending":l?"active":"",children:r.jsx(N,{buttonStyle:{color:"yellow",rounded:"lg",size:"md",vSpace:"md"},buttonVariant:"outline",children:"Home"})})}),o&&r.jsx(B,{message:d,alert:o,setAlert:u}),h&&r.jsx(X,{message:j,alert:h,setAlert:c}),D&&r.jsx(H,{message:v,alert:D,setAlert:m}),!a&&r.jsx(V,{fps:5,disableFlip:!1,rememberLastUsedCamera:!0,qrCodeSuccessCallback:l=>A(l)})]})},_r=({dispensaryHeader:e})=>{const s=q(),{postSubmitDispensary:t}=P(d=>d.dispensarys),[a,n]=i.useState(!1),[o,u]=i.useState("");return i.useEffect(()=>{const d=e.store_medicine_header.number_of_days,h={dispensary_header:{dispensary_medicine_header:e.dispensary_medicine_header.map(c=>{if(Object.keys(c.dispensary_medicine_details).length===0)return{dispensary_medicine_details:[{dispensary_medicine_quantity:parseFloat((d*c.store_medicine_details.quantity_per_day).toFixed(10)),id:0}],id:c.id};const j=c.dispensary_medicine_details.reduce((y,D)=>parseFloat((y+D.dispensary_medicine_quantity).toFixed(10)),0);return{dispensary_medicine_details:[{dispensary_medicine_quantity:parseFloat((d*c.store_medicine_details.quantity_per_day-j).toFixed(10)),id:0}],id:c.id}}),id:e.id,order_number:e.order_number}};s(ws(h))},[s,e]),i.useEffect(()=>{try{if(t.isLoading===!1&&t.isSuccess===!0&&(n(!0),s(fe()),u("Submitted successfully.")),t.isLoading===!1&&t.isSuccess===!1&&t.errors)throw t.errors}catch(d){throw s(fe()),{data:"",internal:!1,status:400,message:b(d).message}}},[s,t]),r.jsx("div",{className:"md:container md:mx-auto",children:a&&r.jsx(H,{message:o,alert:a,setAlert:n})})},vr=()=>{const e=q(),{dispensarySearch:s}=P(p=>p.dispensarys),[t,a]=i.useState(!1),[n,o]=i.useState(!1),[u,d]=i.useState(""),[_,h]=i.useState(!1),[c,j]=i.useState(""),[y,D]=i.useState(),[m,v]=i.useState(),L=p=>{try{const E=JSON.parse(p);e(Q({search_store_order_number_value:E.storeOrderNum,is_pagination:!1,order_by_direction:"",order_by_field:"",page_number:0,page_size:0,search_dispensary_order_id_value:"",search_dispensary_order_number_value:"",search_end_date_value:"",search_end_timestamp_value:"",search_physician_contact_number_value:"",search_physician_name_value:"",search_staff_contact_number_value:"",search_staff_name_value:"",search_start_date_value:"",search_start_timestamp_value:"",search_status_type_value:"",search_store_header_desc_value:""})),v(E),a(!0)}catch{o(!0),d("Invalid QR code."),a(!1)}};return i.useEffect(()=>{var p,E;try{if(s.isLoading===!1&&s.isSuccess===!0){const A=(E=(p=s.data)==null?void 0:p.dispensary_headers)==null?void 0:E.find(l=>l.store_medicine_header.name===(m==null?void 0:m.groupName));A?(A.id&&A.status_type===Le&&e(we({id:A==null?void 0:A.id})),A.status_type===ne&&(h(!0),j("Order has been closed."),a(!1))):(o(!0),d("Invalid QR code."),a(!1)),D(A),e(T())}if(s.isLoading===!1&&s.isSuccess===!1&&s.errors)throw s.errors}catch(A){throw e(T()),{data:"",internal:!1,status:400,message:A}}},[e,m==null?void 0:m.groupName,s]),r.jsxs("div",{className:"md:container md:mx-auto",children:[r.jsx("div",{className:"p-6 space-x-4 flex flex-wrap",children:r.jsx(k,{to:"/",className:({isActive:p,isPending:E})=>E?"pending":p?"active":"",children:r.jsx(N,{buttonStyle:{color:"yellow",rounded:"lg",size:"md",vSpace:"md"},buttonVariant:"outline",children:"Home"})})}),n&&r.jsx(B,{message:u,alert:n,setAlert:o}),_&&r.jsx(X,{message:c,alert:_,setAlert:h}),!t&&r.jsx(V,{fps:5,disableFlip:!1,qrCodeSuccessCallback:p=>L(p)}),(y==null?void 0:y.status_type)===ie&&r.jsx(_r,{dispensaryHeader:y})]})},Ar=()=>{const e=q(),{dispensarySearch:s}=P(l=>l.dispensarys),{putDispensaryChecker:t}=P(l=>l.dispensarys),[a,n]=i.useState(!1),[o,u]=i.useState(!1),[d,_]=i.useState(""),[h,c]=i.useState(!1),[j,y]=i.useState(""),[D,m]=i.useState(!1),[v,L]=i.useState(""),[p,E]=i.useState(),A=l=>{try{const x=JSON.parse(l);e(Q({search_store_order_number_value:x.storeOrderNum,is_pagination:!1,order_by_direction:"",order_by_field:"",page_number:0,page_size:0,search_dispensary_order_id_value:"",search_dispensary_order_number_value:"",search_end_date_value:"",search_end_timestamp_value:"",search_physician_contact_number_value:"",search_physician_name_value:"",search_staff_contact_number_value:"",search_staff_name_value:"",search_start_date_value:"",search_start_timestamp_value:"",search_status_type_value:"",search_store_header_desc_value:""})),E(x),n(!0)}catch{m(!0),L("Invalid QR code."),n(!1)}};return i.useEffect(()=>{var l,x;try{if(s.isLoading===!1&&s.isSuccess===!0){const g=(x=(l=s.data)==null?void 0:l.dispensary_headers)==null?void 0:x.find(U=>U.store_medicine_header.name===(p==null?void 0:p.groupName));g?(g!=null&&g.id&&(g==null?void 0:g.status_type)===ie&&e(Es({dispensary_header:g})),g.status_type===ne&&(c(!0),y("Order has been closed."),n(!1))):(m(!0),L("Invalid QR code."),n(!1))}if(e(T()),s.isLoading===!1&&s.isSuccess===!1&&s.errors)throw s.errors}catch(g){throw e(T()),{data:"",internal:!1,status:400,message:b(g).message}}},[e,p==null?void 0:p.groupName,s]),i.useEffect(()=>{try{if(t.isLoading===!1&&t.isSuccess===!0&&(u(!0),e(he()),_("Submitted successfully.")),t.isLoading===!1&&t.isSuccess===!1&&t.errors)throw t.errors}catch(l){throw e(he()),{data:"",internal:!1,status:400,message:b(l).message}}},[e,t]),r.jsxs("div",{className:"md:container md:mx-auto",children:[r.jsx("div",{className:"p-6 space-x-4 flex flex-wrap",children:r.jsx(k,{to:"/",className:({isActive:l,isPending:x})=>x?"pending":l?"active":"",children:r.jsx(N,{buttonStyle:{color:"yellow",rounded:"lg",size:"md",vSpace:"md"},buttonVariant:"outline",children:"Home"})})}),D&&r.jsx(B,{message:v,alert:D,setAlert:m}),h&&r.jsx(X,{message:j,alert:h,setAlert:c}),o&&r.jsx(H,{message:d,alert:o,setAlert:u}),!a&&r.jsx(V,{fps:5,disableFlip:!1,qrCodeSuccessCallback:l=>A(l)})]})},br=({onDrop:e,previewImage:s})=>{const{getRootProps:t,getInputProps:a,isDragReject:n}=es({onDrop:e,accept:{"image/png":[".png"],"image/jpg":[".jpg"],"image/jpeg":[".jpeg"]}});return r.jsxs("div",{className:"w-full",children:[r.jsxs("div",{className:"border border-dashed border-gray-500 relative w-full justify-center",...t(),children:[r.jsx("input",{className:"cursor-pointer relative block opacity-0 w-full h-full p-20 z-50",...a()}),r.jsxs("div",{className:"text-center p-10 absolute top-0 right-0 left-0 m-auto",children:[r.jsxs("p",{className:"text-2xl",children:["Drop files anywhere to upload",r.jsx("br",{}),"or",r.jsx("br",{}),"Select Files"]}),r.jsx("br",{}),n&&r.jsx("div",{className:"text-red-500 mt-2",children:"File type not accepted, sorry!"})]})]}),s&&r.jsx("img",{className:"w-fit h-fit",src:s})]})},jr=()=>{const e=q(),{dispensarySearch:s}=P(f=>f.dispensarys),{putDispensaryUploadFile:t}=P(f=>f.dispensarys),{postDispensaryCreatePresigned:a}=P(f=>f.cloudStorages),{postS3File:n}=P(f=>f.cloudStorages),[o,u]=i.useState(!1),[d,_]=i.useState(!1),[h,c]=i.useState(!1),[j,y]=i.useState(!1),[D,m]=i.useState(""),[v,L]=i.useState(!1),[p,E]=i.useState(""),[A,l]=i.useState(!1),[x,g]=i.useState(""),[U,Fe]=i.useState(),[M,Ue]=i.useState([]);console.log(n);const[O,Ie]=i.useState(),Pe=f=>{try{const w=JSON.parse(f);e(Q({search_store_order_number_value:w.storeOrderNum,is_pagination:!1,order_by_direction:"",order_by_field:"",page_number:0,page_size:0,search_dispensary_order_id_value:"",search_dispensary_order_number_value:"",search_end_date_value:"",search_end_timestamp_value:"",search_physician_contact_number_value:"",search_physician_name_value:"",search_staff_contact_number_value:"",search_staff_name_value:"",search_start_date_value:"",search_start_timestamp_value:"",search_status_type_value:"",search_store_header_desc_value:""})),Fe(w),u(!0)}catch{y(!0),m("Invalid QR code."),u(!1)}},Te=()=>{try{const f=O==null?void 0:O.organisation.codename,w="dispensary",C=M[0].type.lastIndexOf("/"),W=M[0].type.substring(C+1),J=ss();e(zs({object_name:f+"/"+w+"/"+J+"."+W})),c(!0)}catch{y(!0),m("Upload failed."),u(!1)}};return i.useEffect(()=>{var f,w;try{if(s.isLoading===!1&&s.isSuccess===!0){const C=(w=(f=s.data)==null?void 0:f.dispensary_headers)==null?void 0:w.find(W=>W.store_medicine_header.name===(U==null?void 0:U.groupName));Ie(C),C!=null&&C.url||(_(!0),u(!0)),C!=null&&C.url&&(l(!0),g("Photo has been submitted."),u(!1)),C||(y(!0),m("Invalid QR code."),u(!1)),e(T())}if(s.isLoading===!1&&s.isSuccess===!1&&s.errors)throw s.errors}catch(C){throw e(T()),{data:"",internal:!1,status:400,message:b(C).message}}},[e,U==null?void 0:U.groupName,s]),i.useEffect(()=>{var f,w,C,W,J,oe,ce,le,de,ue;try{if(a.isLoading===!1&&a.isSuccess===!0){e(Se());const ee={postUrl:(f=a==null?void 0:a.data)!=null&&f.url?(w=a==null?void 0:a.data)==null?void 0:w.url:"",AWSAccessKeyId:(C=a==null?void 0:a.data)!=null&&C.fields.AWSAccessKeyId?(W=a==null?void 0:a.data)==null?void 0:W.fields.AWSAccessKeyId:"",key:(J=a==null?void 0:a.data)!=null&&J.fields.key?(oe=a==null?void 0:a.data)==null?void 0:oe.fields.key:"",policy:(ce=a==null?void 0:a.data)!=null&&ce.fields.policy?(le=a==null?void 0:a.data)==null?void 0:le.fields.policy:"",signature:(de=a==null?void 0:a.data)!=null&&de.fields.signature?(ue=a==null?void 0:a.data)==null?void 0:ue.fields.signature:"",file:M[0]};e(Ms(ee))}if(a.isLoading===!1&&a.isSuccess===!1&&a.errors)throw a.errors}catch(ee){throw e(Se()),{data:"",internal:!1,status:400,message:b(ee).message}}},[e,M,a]),i.useEffect(()=>{try{if(n.isLoading===!1&&n.isSuccess===!0&&(e(ge()),O&&a.data&&e(Fs({dispensary_header:{id:O.id,order_number:O.order_number,url:a.data.url+a.data.fields.key}}))),n.isLoading===!1&&n.isSuccess===!1&&n.errors)throw n.errors}catch(f){throw e(ge()),{data:"",internal:!1,status:400,message:b(f).message}}},[e,O,a.data,n]),i.useEffect(()=>{try{if(t.isLoading===!1&&t.isSuccess===!0&&(L(!0),e(ye()),E("Submitted successfully.")),t.isLoading===!1&&t.isSuccess===!1&&t.errors)throw t.errors}catch(f){throw e(ye()),{data:"",internal:!1,status:400,message:b(f).message}}},[e,t]),r.jsxs("div",{className:"md:container md:mx-auto",children:[r.jsx("div",{className:"p-6 space-x-4 flex flex-wrap",children:r.jsx(k,{to:"/",className:({isActive:f,isPending:w})=>w?"pending":f?"active":"",children:r.jsx(N,{buttonStyle:{color:"yellow",rounded:"lg",size:"md",vSpace:"md"},buttonVariant:"outline",children:"Home"})})}),j&&r.jsx(B,{message:D,alert:j,setAlert:y}),A&&r.jsx(X,{message:x,alert:A,setAlert:l}),v&&r.jsx(H,{message:p,alert:v,setAlert:L}),d&&r.jsxs(r.Fragment,{children:[r.jsx(br,{onDrop:f=>{Ue(f.map(w=>Object.assign(w,{preview:URL.createObjectURL(w)})))},previewImage:M.length>0?M[0].preview:""}),r.jsx(N,{buttonStyle:{color:"yellow",rounded:"lg",size:"md",vSpace:"md"},buttonVariant:"outline",isLoading:h,onClick:()=>{Te()},children:"Submit"})]}),!o&&r.jsx(V,{fps:5,disableFlip:!1,qrCodeSuccessCallback:f=>Pe(f)})]})};function Dr(){const{logout:e}=te();return i.useEffect(()=>{e()},[e]),r.jsxs("div",{className:"md:container md:mx-auto",children:[r.jsx(V,{qrCodeSuccessCallback:function(){throw new Error("Function not implemented.")}}),r.jsx("div",{className:"py-3",children:r.jsxs("details",{className:"bg-orange-200  shodaw rounded ",children:[r.jsx("summary",{className:"bg-slate-200 px-3 font-semibold rounded",children:"Dispensary"}),r.jsxs("div",{className:"px-3 grid grid-flow-row-dense grid-cols-2 grid-rows-2",children:[r.jsx("div",{children:r.jsx(k,{to:"/dispensaryStart",className:({isActive:s,isPending:t})=>t?"pending":s?"active":"",children:r.jsx(N,{buttonStyle:{color:"gray",rounded:"lg",size:"md",vSpace:"md"},buttonVariant:"outline",children:"Dispensary Start"})})}),r.jsx("div",{children:r.jsx(k,{to:"/dispensary",className:({isActive:s,isPending:t})=>t?"pending":s?"active":"",children:r.jsx(N,{buttonStyle:{color:"gray",rounded:"lg",size:"md",vSpace:"md"},buttonVariant:"outline",children:"Dispensary"})})}),r.jsx("div",{children:r.jsx(k,{to:"/dispensaryCheck",className:({isActive:s,isPending:t})=>t?"pending":s?"active":"",children:r.jsx(N,{buttonStyle:{color:"gray",rounded:"lg",size:"md",vSpace:"md"},buttonVariant:"outline",children:"Dispensary Check"})})}),r.jsx("div",{children:r.jsx(k,{to:"/dispensaryUpload",className:({isActive:s,isPending:t})=>t?"pending":s?"active":"",children:r.jsx(N,{buttonStyle:{color:"gray",rounded:"lg",size:"md",vSpace:"md"},buttonVariant:"outline",children:"Dispensary Upload"})})})]})]})}),r.jsx("div",{className:"py-3",children:r.jsxs("details",{className:"bg-orange-200  shodaw rounded",children:[r.jsx("summary",{className:"bg-slate-200 px-3 font-semibold rounded",children:"Dispensary"}),r.jsxs("div",{className:"px-3 grid grid-flow-row-dense grid-cols-2 grid-rows-2",children:[r.jsx(k,{to:"/dispensaryStart",className:({isActive:s,isPending:t})=>t?"pending":s?"active":"",children:r.jsx(N,{buttonStyle:{color:"gray",rounded:"lg",size:"md",vSpace:"md"},buttonVariant:"outline",children:"Dispensary Start"})}),r.jsx(k,{to:"/dispensary",className:({isActive:s,isPending:t})=>t?"pending":s?"active":"",children:r.jsx(N,{buttonStyle:{color:"gray",rounded:"lg",size:"md",vSpace:"md"},buttonVariant:"outline",children:"Dispensary"})}),r.jsx(k,{to:"/dispensaryCheck",className:({isActive:s,isPending:t})=>t?"pending":s?"active":"",children:r.jsx(N,{buttonStyle:{color:"gray",rounded:"lg",size:"md",vSpace:"md"},buttonVariant:"outline",children:"Dispensary Check"})}),r.jsx(k,{to:"/dispensaryUpload",className:({isActive:s,isPending:t})=>t?"pending":s?"active":"",children:r.jsx(N,{buttonStyle:{color:"gray",rounded:"lg",size:"md",vSpace:"md"},buttonVariant:"outline",children:"Dispensary Upload"})})]})]})})]})}const wr=()=>{const{loginUser:e}=te(),s=i.useRef(!1),[t,a]=i.useState(null),[n,o]=i.useState(""),[u,d]=i.useState(!1);return i.useEffect(()=>{(async()=>{if("NDEFReader"in window)try{const h=new NDEFReader;await h.scan(),h.onreadingerror=()=>{d(!0),o("Cannot read data from the NFC tag.  Please try again.")},h.onreading=c=>{if(c.message.records[0].mediaType==="application/json"){const j=new TextDecoder,y=JSON.parse(j.decode(c.message.records[0].data));a(y)}else d(!0),o("Cannot read data from the NFC tag. Please try again.")}}catch(h){d(!0),o(`Error! Scan failed to start: ${h}.`),a(null)}})()},[]),i.useEffect(()=>{!s.current&&(t!=null&&t.a)&&(t!=null&&t.s)&&(s.current=!0,a(null),e(t==null?void 0:t.a,t==null?void 0:t.s))},[t,e]),r.jsxs(r.Fragment,{children:[r.jsx(B,{message:n,alert:u,setAlert:d}),!u&&r.jsx("div",{className:"fixed left-0 top-0 z-[1055] h-full w-full overflow-y-auto overflow-x-hidden outline-none backdrop-brightness-50",children:r.jsx("div",{className:"px-2 mt-16",children:r.jsxs("div",{className:"bg-blue-200 px-6 py-4 mx-auto my-4 rounded-md text-lg flex items-center max-w-lg",children:[r.jsx("svg",{viewBox:"0 0 24 24",className:"text-blue-600 w-5 h-5 sm:w-5 sm:h-5 mr-3",children:r.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"})}),r.jsx("span",{className:"text-blue-800",children:"Please tag your NFC card to login."})]})})})]})},G=({children:e})=>{const s=ve(),{isLoggedIn:t}=te();return t()?r.jsx(r.Fragment,{children:e}):r.jsx(Ye,{to:"/login",state:{from:s},replace:!0})};class Y extends i.Component{constructor(s){super(s),this.state={hasError:!1,errorMsg:""}}componentDidCatch(s,t){console.error("ErrorBoundary caught an error: ",s,t),this.setState({hasError:!0,errorMsg:s.message})}render(){return this.state.hasError?r.jsxs(r.Fragment,{children:[r.jsx(B,{alert:this.state.hasError,message:this.state.errorMsg,setAlert:()=>this.setState({hasError:!1})}),this.props.children]}):this.props.children}}const Nr=We([{path:"/",element:r.jsx(fr,{}),errorElement:r.jsx(xe,{}),children:[{path:"",element:r.jsx(Dr,{})},{path:"login",element:r.jsx(wr,{}),errorElement:r.jsx(xe,{})},{path:"dispensaryStart",element:r.jsx(G,{children:r.jsx(Y,{children:r.jsx(xr,{})})})},{path:"dispensary",element:r.jsx(G,{children:r.jsx(Y,{children:r.jsx(vr,{})})})},{path:"dispensaryCheck",element:r.jsx(G,{children:r.jsx(Y,{children:r.jsx(Ar,{})})})},{path:"dispensaryUpload",element:r.jsx(G,{children:r.jsx(Y,{children:r.jsx(jr,{})})})}]}]);Re.createRoot(document.getElementById("root")).render(r.jsx(Me,{store:lr,children:r.jsx(qe,{router:Nr})}));
