import{_ as cn,a as Bn}from"./@babel-B-8tVzRs.js";var N=function(n){return"@@redux-saga/"+n},Xn=N("CANCEL_PROMISE"),fn=N("CHANNEL_END"),ln=N("IO"),tn=N("MATCH"),sn=N("MULTICAST"),vn=N("SAGA_ACTION"),dn=N("SELF_CANCELLATION"),Vn=N("TASK"),O=N("TASK_CANCEL"),hn=N("TERMINATE"),zn=N("LOCATION"),gn=function(n){return n==null},P=function(n){return n!=null},A=function(n){return typeof n=="function"},V=function(n){return typeof n=="string"},k=Array.isArray,K=function(n){return n&&A(n.then)},z=function(n){return n&&A(n.next)&&A(n.throw)},rn=function e(n){return n&&(V(n)||pn(n)||A(n)||k(n)&&n.every(e))},Q=function(n){return n&&A(n.take)&&A(n.close)},En=function(n){return A(n)&&n.hasOwnProperty("toString")},pn=function(n){return!!n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype},Qn=function(n){return Q(n)&&n[sn]},Yn=function(n){return function(){return n}},Zn=Yn(!0),S=function(){},$n=function(n){return n},Y=function(n,t){cn(n,t),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(function(r){n[r]=t[r]})},Jn=function(n,t){var r;return(r=[]).concat.apply(r,t.map(n))};function H(e,n){var t=e.indexOf(n);t>=0&&e.splice(t,1)}function _n(e){var n=!1;return function(){n||(n=!0,e())}}var ne=function(n){throw n},ee=function(n){return{value:n,done:!0}};function X(e,n,t){n===void 0&&(n=ne),t===void 0&&(t="iterator");var r={meta:{name:t},next:e,throw:n,return:ee,isSagaIterator:!0};return typeof Symbol<"u"&&(r[Symbol.iterator]=function(){return r}),r}function te(e,n){var t=n.sagaStack;console.error(e),console.error(t)}var yn=function(n){return Array.apply(null,new Array(n))},re=function(n){return function(t){return n(Object.defineProperty(t,vn,{value:!0}))}},Sn=function(n){return n===hn},An=function(n){return n===O},mn=function(n){return Sn(n)||An(n)};function Cn(e,n){var t=Object.keys(e),r=t.length,u=0,i,c=k(e)?yn(r):{},o={};function a(){u===r&&(i=!0,n(c))}return t.forEach(function(f){var l=function(v,d){i||(d||mn(v)?(n.cancel(),n(v,d)):(c[f]=v,u++,a()))};l.cancel=S,o[f]=l}),n.cancel=function(){i||(i=!0,t.forEach(function(f){return o[f].cancel()}))},o}function Z(e){return{name:e.name||"anonymous",location:Tn(e)}}function Tn(e){return e[zn]}function ae(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.length===0?function(r){return r}:n.length===1?n[0]:n.reduce(function(r,u){return function(){return r(u.apply(void 0,arguments))}})}var oe="Channel's Buffer overflow!",ue=1,ce=3,xn=4;function ie(e,n){e===void 0&&(e=10);var t=new Array(e),r=0,u=0,i=0,c=function(l){t[u]=l,u=(u+1)%e,r++},o=function(){if(r!=0){var l=t[i];return t[i]=null,r--,i=(i+1)%e,l}},a=function(){for(var l=[];r;)l.push(o());return l};return{isEmpty:function(){return r==0},put:function(l){if(r<e)c(l);else{var s;switch(n){case ue:throw new Error(oe);case ce:t[u]=l,u=(u+1)%e,i=u;break;case xn:s=2*e,t=a(),r=t.length,u=t.length,i=0,t.length=s,e=s,c(l);break}}},take:o,flush:a}}var fe=function(n){return ie(n,xn)},U="TAKE",Nn="PUT",Ln="ALL",le="RACE",se="CALL",ve="CPS",kn="FORK",de="JOIN",wn="CANCEL",he="SELECT",ge="ACTION_CHANNEL",Ee="CANCELLED",pe="FLUSH",ye="GET_CONTEXT",Se="SET_CONTEXT",M=function(n,t){var r;return r={},r[ln]=!0,r.combinator=!1,r.type=n,r.payload=t,r};function Ae(e,n){if(e===void 0&&(e="*"),rn(e))return P(n)&&console.warn("take(pattern) takes one argument but two were provided. Consider passing an array for listening to several action types"),M(U,{pattern:e});if(Qn(e)&&P(n)&&rn(n))return M(U,{channel:e,pattern:n});if(Q(e))return P(n)&&console.warn("take(channel) takes one argument but two were provided. Second argument is ignored."),M(U,{channel:e})}function ct(e,n){return gn(n)&&(n=e,e=void 0),M(Nn,{channel:e,action:n})}function it(e){var n=M(Ln,e);return n.combinator=!0,n}function me(e,n){var t=null,r;return A(e)?r=e:(k(e)?(t=e[0],r=e[1]):(t=e.context,r=e.fn),t&&V(r)&&A(t[r])&&(r=t[r])),{context:t,fn:r,args:n}}function Rn(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return M(kn,me(e,t))}function Ce(e){return e===void 0&&(e=dn),M(wn,e)}function Te(){var e={};return e.promise=new Promise(function(n,t){e.resolve=n,e.reject=t}),e}var In=[],W=0;function xe(e){try{$(),e()}finally{jn()}}function Mn(e){In.push(e),W||($(),Fn())}function On(e){try{return $(),e()}finally{Fn()}}function $(){W++}function jn(){W--}function Fn(){jn();for(var e;!W&&(e=In.shift())!==void 0;)xe(e)}var Ne=function(n){return function(t){return n.some(function(r){return J(r)(t)})}},Le=function(n){return function(t){return n(t)}},an=function(n){return function(t){return t.type===String(n)}},ke=function(n){return function(t){return t.type===n}},qn=function(){return Zn};function J(e){var n=e==="*"?qn:V(e)?an:k(e)?Ne:En(e)?an:A(e)?Le:pn(e)?ke:null;if(n===null)throw new Error("invalid pattern: "+e);return n(e)}var j={type:fn},_=function(n){return n&&n.type===fn};function we(e){e===void 0&&(e=fe());var n=!1,t=[];function r(o){if(!n){if(t.length===0)return e.put(o);var a=t.shift();a(o)}}function u(o){n&&e.isEmpty()?o(j):e.isEmpty()?(t.push(o),o.cancel=function(){H(t,o)}):o(e.take())}function i(o){if(n&&e.isEmpty()){o(j);return}o(e.flush())}function c(){if(!n){n=!0;var o=t;t=[];for(var a=0,f=o.length;a<f;a++){var l=o[a];l(j)}}}return{take:u,put:r,flush:i,close:c}}function Re(){var e,n=!1,t=[],r=t,u=function(){r===t&&(r=t.slice())},i=function(){n=!0;var o=t=r;r=[],o.forEach(function(a){a(j)})};return e={},e[sn]=!0,e.put=function(o){if(!n){if(_(o)){i();return}for(var a=t=r,f=0,l=a.length;f<l;f++){var s=a[f];s[tn](o)&&(s.cancel(),s(o))}}},e.take=function(o,a){if(a===void 0&&(a=qn),n){o(j);return}o[tn]=a,u(),r.push(o),o.cancel=_n(function(){u(),H(r,o)})},e.close=i,e}function Pn(){var e=Re(),n=e.put;return e.put=function(t){if(t[vn]){n(t);return}Mn(function(){n(t)})},e}var I=0,L=1,D=2,Un=3;function nn(e,n){var t=e[Xn];A(t)&&(n.cancel=t),e.then(n,function(r){n(r,!0)})}var q=0,Dn=function(){return++q},y;function Ie(e,n){return e.isSagaIterator?{name:e.meta.name}:Z(n)}function Me(e){var n=e.context,t=e.fn,r=e.args;try{var u=t.apply(n,r);if(z(u))return u;var i=!1,c=function(a){return i?{value:a,done:!0}:(i=!0,{value:u,done:!K(u)})};return X(c)}catch(o){return X(function(){throw o})}}function Oe(e,n,t){var r=n.channel,u=n.action,i=n.resolve;Mn(function(){var c;try{c=(r?r.put:e.dispatch)(u)}catch(o){t(o,!0);return}i&&K(c)?nn(c,t):t(c)})}function je(e,n,t){var r=n.channel,u=r===void 0?e.channel:r,i=n.pattern,c=n.maybe,o=function(f){if(f instanceof Error){t(f,!0);return}if(_(f)&&!c){t(hn);return}t(f)};try{u.take(o,P(i)?J(i):null)}catch(a){t(a,!0);return}t.cancel=o.cancel}function Fe(e,n,t,r){var u=n.context,i=n.fn,c=n.args,o=r.task;try{var a=i.apply(u,c);if(K(a)){nn(a,t);return}if(z(a)){G(e,a,o.context,q,Z(i),!1,t);return}t(a)}catch(f){t(f,!0)}}function qe(e,n,t){var r=n.context,u=n.fn,i=n.args;try{var c=function(a,f){gn(a)?t(f):t(a,!0)};u.apply(r,i.concat(c)),c.cancel&&(t.cancel=c.cancel)}catch(o){t(o,!0)}}function Pe(e,n,t,r){var u=n.context,i=n.fn,c=n.args,o=n.detached,a=r.task,f=Me({context:u,fn:i,args:c}),l=Ie(f,i);On(function(){var s=G(e,f,a.context,q,l,o,void 0);o?t(s):s.isRunning()?(a.queue.addTask(s),t(s)):s.isAborted()?a.queue.abort(s.error()):t(s)})}function Ue(e,n,t,r){var u=r.task,i=function(a,f){if(a.isRunning()){var l={task:u,cb:f};f.cancel=function(){a.isRunning()&&H(a.joiners,l)},a.joiners.push(l)}else a.isAborted()?f(a.error(),!0):f(a.result())};if(k(n)){if(n.length===0){t([]);return}var c=Cn(n,t);n.forEach(function(o,a){i(o,c[a])})}else i(n,t)}function b(e){e.isRunning()&&e.cancel()}function De(e,n,t,r){var u=r.task;n===dn?b(u):k(n)?n.forEach(b):b(n),t()}function Ke(e,n,t,r){var u=r.digestEffect,i=q,c=Object.keys(n);if(c.length===0){t(k(n)?[]:{});return}var o=Cn(n,t);c.forEach(function(a){u(n[a],i,o[a],a)})}function He(e,n,t,r){var u=r.digestEffect,i=q,c=Object.keys(n),o=k(n)?yn(c.length):{},a={},f=!1;c.forEach(function(l){var s=function(d,p){f||(p||mn(d)?(t.cancel(),t(d,p)):(t.cancel(),f=!0,o[l]=d,t(o)))};s.cancel=S,a[l]=s}),t.cancel=function(){f||(f=!0,c.forEach(function(l){return a[l].cancel()}))},c.forEach(function(l){f||u(n[l],i,a[l],l)})}function We(e,n,t){var r=n.selector,u=n.args;try{var i=r.apply(void 0,[e.getState()].concat(u));t(i)}catch(c){t(c,!0)}}function Ge(e,n,t){var r=n.pattern,u=n.buffer,i=we(u),c=J(r),o=function f(l){_(l)||e.channel.take(f,c),i.put(l)},a=i.close;i.close=function(){o.cancel(),a()},e.channel.take(o,c),t(i)}function be(e,n,t,r){var u=r.task;t(u.isCancelled())}function Be(e,n,t){n.flush(t)}function Xe(e,n,t,r){var u=r.task;t(u.context[n])}function Ve(e,n,t,r){var u=r.task;Y(u.context,n),t()}var ze=(y={},y[U]=je,y[Nn]=Oe,y[Ln]=Ke,y[le]=He,y[se]=Fe,y[ve]=qe,y[kn]=Pe,y[de]=Ue,y[wn]=De,y[he]=We,y[ge]=Ge,y[Ee]=be,y[pe]=Be,y[ye]=Xe,y[Se]=Ve,y);function Qe(e,n,t){var r=[],u,i=!1;a(e);var c=function(){return r};function o(l){n(),f(),t(l,!0)}function a(l){r.push(l),l.cont=function(s,v){i||(H(r,l),l.cont=S,v?o(s):(l===e&&(u=s),r.length||(i=!0,t(u))))}}function f(){i||(i=!0,r.forEach(function(l){l.cont=S,l.cancel()}),r=[])}return{addTask:a,cancelAll:f,abort:o,getTasks:c}}function Kn(e,n){return e+"?"+n}function Ye(e){var n=Tn(e);if(n){var t=n.code,r=n.fileName,u=n.lineNumber,i=t+"  "+Kn(r,u);return i}return""}function on(e){var n=e.name,t=e.location;return t?n+"  "+Kn(t.fileName,t.lineNumber):n}function Ze(e){var n=Jn(function(t){return t.cancelledTasks},e);return n.length?["Tasks cancelled due to error:"].concat(n).join(`
`):""}var en=null,F=[],$e=function(n){n.crashedEffect=en,F.push(n)},Hn=function(){en=null,F.length=0},Je=function(n){en=n},_e=function(){var n=F[0],t=F.slice(1),r=n.crashedEffect?Ye(n.crashedEffect):null,u="The above error occurred in task "+on(n.meta)+(r?` 
 when executing effect `+r:"");return[u].concat(t.map(function(i){return"    created by "+on(i.meta)}),[Ze(F)]).join(`
`)};function nt(e,n,t,r,u,i,c){var o;c===void 0&&(c=S);var a=I,f,l,s=null,v=[],d=Object.create(t),p=Qe(n,function(){v.push.apply(v,p.getTasks().map(function(x){return x.meta.name}))},m);function g(){a===I&&(a=L,p.cancelAll(),m(O,!1))}function m(h,x){if(!x)h===O?a=L:a!==L&&(a=Un),f=h,s&&s.resolve(h);else{if(a=D,$e({meta:u,cancelledTasks:v}),C.isRoot){var w=_e();Hn(),e.onError(h,{sagaStack:w})}l=h,s&&s.reject(h)}C.cont(h,x),C.joiners.forEach(function(R){R.cb(h,x)}),C.joiners=null}function E(h){Y(d,h)}function T(){return s||(s=Te(),a===D?s.reject(l):a!==I&&s.resolve(f)),s.promise}var C=(o={},o[Vn]=!0,o.id=r,o.meta=u,o.isRoot=i,o.context=d,o.joiners=[],o.queue=p,o.cancel=g,o.cont=c,o.end=m,o.setContext=E,o.toPromise=T,o.isRunning=function(){return a===I},o.isCancelled=function(){return a===L||a===I&&n.status===L},o.isAborted=function(){return a===D},o.result=function(){return f},o.error=function(){return l},o);return C}function G(e,n,t,r,u,i,c){var o=e.finalizeRunEffect(d);v.cancel=S;var a={meta:u,cancel:s,status:I},f=nt(e,a,t,r,u,i,c),l={task:f,digestEffect:p};function s(){a.status===I&&(a.status=L,v(O))}return c&&(c.cancel=f.cancel),v(),f;function v(g,m){try{var E;m?(E=n.throw(g),Hn()):An(g)?(a.status=L,v.cancel(),E=A(n.return)?n.return(O):{done:!0,value:O}):Sn(g)?E=A(n.return)?n.return():{done:!0}:E=n.next(g),E.done?(a.status!==L&&(a.status=Un),a.cont(E.value)):p(E.value,r,v)}catch(T){if(a.status===L)throw T;a.status=D,a.cont(T,!0)}}function d(g,m,E){if(K(g))nn(g,E);else if(z(g))G(e,g,f.context,m,u,!1,E);else if(g&&g[ln]){var T=ze[g.type];T(e,g.payload,E,l)}else E(g)}function p(g,m,E,T){T===void 0&&(T="");var C=Dn();e.sagaMonitor&&e.sagaMonitor.effectTriggered({effectId:C,parentEffectId:m,label:T,effect:g});var h;function x(w,R){h||(h=!0,E.cancel=S,e.sagaMonitor&&(R?e.sagaMonitor.effectRejected(C,w):e.sagaMonitor.effectResolved(C,w)),R&&Je(g),E(w,R))}x.cancel=S,E.cancel=function(){h||(h=!0,x.cancel(),x.cancel=S,e.sagaMonitor&&e.sagaMonitor.effectCancelled(C))},o(g,C,x)}}function et(e,n){for(var t=e.channel,r=t===void 0?Pn():t,u=e.dispatch,i=e.getState,c=e.context,o=c===void 0?{}:c,a=e.sagaMonitor,f=e.effectMiddlewares,l=e.onError,s=l===void 0?te:l,v=arguments.length,d=new Array(v>2?v-2:0),p=2;p<v;p++)d[p-2]=arguments[p];var g=n.apply(void 0,d),m=Dn();a&&(a.rootSagaStarted=a.rootSagaStarted||S,a.effectTriggered=a.effectTriggered||S,a.effectResolved=a.effectResolved||S,a.effectRejected=a.effectRejected||S,a.effectCancelled=a.effectCancelled||S,a.actionDispatched=a.actionDispatched||S,a.rootSagaStarted({effectId:m,saga:n,args:d}));var E;if(f){var T=ae.apply(void 0,f);E=function(x){return function(w,R,Wn){var Gn=function(bn){return x(bn,R,Wn)};return T(Gn)(w)}}}else E=$n;var C={channel:r,dispatch:re(u),getState:i,sagaMonitor:a,onError:s,finalizeRunEffect:E};return On(function(){var h=G(C,g,o,m,Z(n),!0,void 0);return a&&a.effectResolved(m,h),h})}function ft(e){var n=e===void 0?{}:e,t=n.context,r=t===void 0?{}:t,u=n.channel,i=u===void 0?Pn():u,c=n.sagaMonitor,o=Bn(n,["context","channel","sagaMonitor"]),a;function f(l){var s=l.getState,v=l.dispatch;return a=et.bind(null,cn({},o,{context:r,channel:i,dispatch:v,getState:s,sagaMonitor:c})),function(d){return function(p){c&&c.actionDispatched&&c.actionDispatched(p);var g=d(p);return i.put(p),g}}}return f.run=function(){return a.apply(void 0,arguments)},f.setContext=function(l){Y(r,l)},f}var un=function(n){return{done:!0,value:n}},B={};function tt(e){return Q(e)?"channel":En(e)?String(e):A(e)?e.name:String(e)}function rt(e,n,t){var r,u,i,c=n;function o(a,f){if(c===B)return un(a);if(f&&!u)throw c=B,f;r&&r(a);var l=f?e[u](f):e[c]();return c=l.nextState,i=l.effect,r=l.stateUpdater,u=l.errorState,c===B?un(a):i}return X(o,function(a){return o(null,a)},t)}function at(e,n){for(var t=arguments.length,r=new Array(t>2?t-2:0),u=2;u<t;u++)r[u-2]=arguments[u];var i={done:!1,value:Ae(e)},c=function(d){return{done:!1,value:Rn.apply(void 0,[n].concat(r,[d]))}},o=function(d){return{done:!1,value:Ce(d)}},a,f,l=function(d){return a=d},s=function(d){return f=d};return rt({q1:function(){return{nextState:"q2",effect:i,stateUpdater:s}},q2:function(){return a?{nextState:"q3",effect:o(a)}:{nextState:"q1",effect:c(f),stateUpdater:l}},q3:function(){return{nextState:"q1",effect:c(f),stateUpdater:l}}},"q1","takeLatest("+tt(e)+", "+n.name+")")}function lt(e,n){for(var t=arguments.length,r=new Array(t>2?t-2:0),u=2;u<t;u++)r[u-2]=arguments[u];return Rn.apply(void 0,[at,e,n].concat(r))}export{it as a,Rn as f,ct as p,ft as s,lt as t};
